- shell:
  # TODO: make sure that this dir is added to $PATH
  - [mkdir -p ~/.local/bin, Create directory for user-wide binaries]
  - [chmod +x utils/brw/brw, Promote brw to executable]

- link:
    ~/.local/bin/brw:
      path: utils/brw/brw
      relink: true
    ~/.local/bin/git-notify:
      path: utils/git-notify/git-notify.sh
      relink: true

- shell:
  - [brw coreutils wget ack ag git git-lfs lua tree ncdu lynx terminal-notifier ledger ossp-uuid mu, Install some helpful packages]
  - [brew install aspell --with-all-langs, Install aspell]
  - [brw fish, Bootstrap fish]
  - [chmod +x emacs/bootstrap && emacs/bootstrap, Bootstrap emacs]
  - [chmod +x emacs/switch_emacs, Promote switch_emacs to executable]

- link:
    ~/.emacs.d:
      path: ../.emacs.d.spacemacs
      relink: true
    ~/.local/bin/switch_emacs:
      path: emacs/switch_emacs
      create: true

    ~/.ghci: haskell/.ghci
    ~/.stack/global/stack.yaml:
      path: haskell/stack-global.yaml
      create: true
      relink: true
    ~/.stack/config.yaml:
      path: haskell/stack.yaml
      create: true
      relink: true
    ~/.cabal/config:
      path: haskell/cabal-config
      create: true

- shell:
    - [brw haskell-stack && stack setup, "Bootstrap haskell"]

- link:
    ~/.aws/config:
      path: ../Dropbox/Apps/aws/config
      create: true
    ~/.gitignore_global: git/.gitignore_global
    ~/.hgrc: ../Dropbox/Apps/hgrc

- shell:
  - [echo "set -U XDG_CONFIG_HOME ~/.environment" | fish, Setting config directory]
  - [echo "set -x XDG_CONFIG_HOME ~/.environment" | fish, Setting config directory]
  - [echo "set -x SPACEMACSDIR $XDG_CONFIG_HOME/emacs" | fish, Setting Spacemacs directory]
  - sh git/configure.sh
  - sh osx/configure.sh
  -
    command: brw slack mplayerx colorpicker flux gitter
    description: installing several useful apps
    stdout: true
