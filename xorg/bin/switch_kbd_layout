#!/usr/bin/env bash

# If an explicit layout is provided as an argument, use it. Otherwise, select
# the next layout from the set [us, ua].

if [[ -n "$1" ]]; then
  setxkbmap "$1"
else
  layout=$(setxkbmap -query | awk '/layout/{print $2}')
  variant=$(setxkbmap -query | awk '/variant/{print $2}')
  case $layout in
    us)
      case $variant in
        intl)
          setxkbmap us
          ;;
        *)
          setxkbmap -layout us -variant intl
          ;;
      esac
      ;;
    *)
      setxkbmap us
      ;;
  esac
fi
